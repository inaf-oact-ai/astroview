@page "/Datasets/{DatasetId:int}/MorphologyClassifier"
@inherits AppPageBase
<PageTitle>Source Morphology ViT Classifier</PageTitle>
<Breadcrumbs PageName="DatasetFunctionMorphologyClassifier" DatasetName="@vm.DatasetName" DatasetId="@DatasetId"></Breadcrumbs>

<div class="page-header">
    <span class="page-header-title">Source Morphology ViT Classifier</span>
    <DisplayModeSelector DatasetId="DatasetId" OnDisplayModeChanged="OnDisplayModeChanged" />
</div>

@if (vm.ExecuteDisabled)
{
    <div class="ui negative message">
        <p>Caesar Dataset must be generated for Display Mode: @vm.SelectedDisplayMode?.Name</p>
    </div>
}

<div class="ui grid">
    <div class="row">
        <div class="four wide column">
            <h4 class="ui dividing header">Input</h4>
            <div class="ui form">
                <div class="field">
                    <label>Classifier model to be used (smorphclass_multilabel, smorph-singlelabel-rgz, etc.)</label>
                    <InputText @bind-Value="vm.Parameters.Model"></InputText>
                </div>
            </div>
            <h4 class="ui dividing header">Pre-processing</h4>
            <div class="ui form">
                <div class="field">
                    <div class="ui checkbox">
                        <InputCheckbox id="NormalizeMinMax" @bind-Value="vm.Parameters.Zscale"></InputCheckbox>
                        <label for="NormalizeMinMax">Apply z-scale transform with given contrast</label>
                    </div>
                </div>
                <div class="field">
                    <label>Z-scale contrast applied to all channels</label>
                    <InputNumber @bind-Value="vm.Parameters.ZscaleContrast"></InputNumber>
                </div>
            </div>
        </div>
        <div class="four wide column">
        </div>
        <div class="four wide column">
            <h4 class="ui dividing header">Run</h4>
            <div class="ui form">
                <div class="field">
                    <div class="ui checkbox">
                        <InputCheckbox id="noLogRedir" @bind-Value="vm.Parameters.NoLogRedir"></InputCheckbox>
                        <label for="noLogRedir">Do not redirect logs to output file in script</label>
                    </div>
                </div>
            </div>
        </div>
        <div class="four wide column">
        </div>
    </div>
    <div class="row">
        <div class="four wide column">
            <button class="ui compact primary button @(vm.ShowExecuteLoader ? "loading" : "")" disabled=@vm.ExecuteDisabled @onclick="Execute">Execute</button>
            <button class="ui compact button @(vm.ShowLoadDescriptionLoader ? "loading" : "")" @onclick="LoadDescription">Load Description</button>
        </div>
    </div>
    @if (vm.Description.Length > 0)
    {
        <div class="row">
            <div class="sixteen wide column">
                <div class="ui message">
                    <pre>@((MarkupString)vm.Description)</pre>
                </div>
            </div>
        </div>
    }
</div>